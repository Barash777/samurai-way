"use strict";(self.webpackChunksamurai_way=self.webpackChunksamurai_way||[]).push([[339],{339:function(e,i,s){s.r(i),s.d(i,{default:function(){return U},withParams:function(){return D}});var t=s(1413),o=s(5671),n=s(3144),r=s(9340),l=s(1129),a=s(2791),u="ProfileInfo_avatar__1VFcV",d="ProfileInfo_description__u7GZ5",c=s(5750),p=s(9439),f=s(184),v=function(e){var i=(0,a.useState)(!1),s=(0,p.Z)(i,2),t=s[0],o=s[1],n=(0,a.useState)(e.status),r=(0,p.Z)(n,2),l=r[0],u=r[1],d=function(){o(!1),e.updateProfileStatus(l)};return(0,a.useEffect)((function(){u(e.status)}),[e.status]),(0,f.jsxs)("div",{children:[(0,f.jsx)("b",{children:"status: "}),t?(0,f.jsx)("input",{autoFocus:!0,value:l,onChange:function(e){u(e.currentTarget.value)},onKeyDown:function(e){"Enter"===e.key&&d()},onBlur:function(){d()}}):(0,f.jsx)("span",{onDoubleClick:function(){e.isOwner&&o(!0)},children:e.status||"No status"})]})},h=s(9765),x="About_aboutMeBlock__8hZCk",j=s(5290),m=function(e){var i=e.profile,s=e.isOwner,t=e.saveProfile,o=(0,a.useState)(!1),n=(0,p.Z)(o,2),r=n[0],l=n[1];return r?(0,f.jsx)(g,{profile:i,isOwner:s,editMode:r,changeMode:l,saveProfile:t}):(0,f.jsxs)("div",{className:x,children:[s&&!r&&(0,f.jsx)("button",{onClick:function(){l((function(e){return!e}))},children:"Edit profile"}),(0,f.jsx)("h3",{children:"Profile info:"}),(0,f.jsxs)("div",{children:["My name is ",null===i||void 0===i?void 0:i.fullName]}),(0,f.jsxs)("div",{children:["About me: ",null===i||void 0===i?void 0:i.aboutMe]}),i.lookingForAJob?(0,f.jsxs)("div",{children:["I'm looking for a job!!! ",i.lookingForAJobDescription]}):"",(0,f.jsxs)("div",{children:[(0,f.jsx)("b",{children:"Contacts:"}),Object.keys(i.contacts).map((function(e){return(0,f.jsx)(b,{title:e,value:i.contacts[e]},e)}))]})]})},g=function(e){var i=e.profile,s=e.isOwner,o=e.editMode,n=e.changeMode,r=e.saveProfile,l=(0,j.cI)({mode:"onTouched"}),a=l.register,u=l.handleSubmit,d=l.formState.errors;return(0,f.jsx)("div",{className:x,children:(0,f.jsxs)("form",{onSubmit:u((function(e){n(!o),r(e)})),children:[s&&(0,f.jsx)(f.Fragment,{children:o&&(0,f.jsx)("input",{type:"submit",value:"Save profile"})}),(0,f.jsx)("h3",{children:"Profile info:"}),(0,f.jsxs)("div",{children:["My name is ",(0,f.jsx)("input",(0,t.Z)((0,t.Z)({},a("fullName",{required:"name is required",value:null===i||void 0===i?void 0:i.fullName})),{},{placeholder:"name"})),d.fullName&&(0,f.jsx)("span",{style:{color:"red"},children:d.fullName.message})]}),(0,f.jsxs)("div",{children:["About me: ",(0,f.jsx)("input",(0,t.Z)((0,t.Z)({},a("aboutMe",{required:"about me is required",value:null===i||void 0===i?void 0:i.aboutMe})),{},{placeholder:"about me"})),d.aboutMe&&(0,f.jsx)("span",{style:{color:"red"},children:d.aboutMe.message})]}),(0,f.jsxs)("div",{children:[(0,f.jsx)("textarea",(0,t.Z)((0,t.Z)({},a("lookingForAJobDescription",{required:"looking for a job description is required",value:null===i||void 0===i?void 0:i.lookingForAJobDescription})),{},{placeholder:"looking for a job description"})),d.lookingForAJobDescription&&(0,f.jsx)("span",{style:{color:"red"},children:d.lookingForAJobDescription.message})]}),(0,f.jsxs)("div",{children:[(0,f.jsx)("input",(0,t.Z)({id:"lookingForAJob",type:"checkbox"},a("lookingForAJob",{value:null===i||void 0===i?void 0:i.lookingForAJob}))),(0,f.jsx)("label",{htmlFor:"lookingForAJob",children:"looking for a job?"})]}),(0,f.jsxs)("div",{children:[(0,f.jsx)("b",{children:"Contacts:"}),Object.keys(i.contacts).map((function(e){var s,o=e;return(0,f.jsxs)("div",{style:{marginLeft:"10px"},children:[(0,f.jsxs)("b",{children:[o,":"]})," ",(0,f.jsx)("input",(0,t.Z)((0,t.Z)({},a("contacts.".concat(o),{value:null===i||void 0===i?void 0:i.contacts[o],pattern:{value:/^(ftp|http|https):\/\/[^ "]+$/,message:"Write correct URL"}})),{},{placeholder:o})),d.contacts&&d.contacts[o]&&(0,f.jsx)("span",{style:{color:"red"},children:null===(s=d.contacts[o])||void 0===s?void 0:s.message})]},o)}))]})]})})},b=function(e){var i=e.title,s=e.value;return(0,f.jsxs)("div",{style:{marginLeft:"10px"},children:[(0,f.jsxs)("b",{children:[i,":"]})," ",s]})};var P=function(e){var i,s,t,o,n,r=(null===(i=e.profile)||void 0===i||null===(s=i.photos)||void 0===s?void 0:s.large)||(null===(t=e.profile)||void 0===t||null===(o=t.photos)||void 0===o?void 0:o.small)||h;return null!==(n=e.profile)&&void 0!==n&&n.userId?(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)("div",{className:d,children:[(0,f.jsx)("img",{className:u,src:r,alt:""}),e.isOwner&&(0,f.jsx)("input",{type:"file",onChange:function(i){var s=i.target.files;if(s.length>0){var t=s[0];e.savePhoto(t)}}}),(0,f.jsx)(v,{status:e.status,updateProfileStatus:e.updateProfileStatus,isOwner:e.isOwner})]}),(0,f.jsx)(m,{profile:e.profile,isOwner:e.isOwner,saveProfile:e.saveProfile})]}):(0,f.jsx)(c.Z,{})},k=s(6407),Z="MyPosts_posts__GSiZ2",y="MyPosts_postsBlock__lB-pf",w="Post_item__Yu4oG";var A=function(e){return(0,f.jsxs)("div",{className:w,children:[(0,f.jsx)("img",{src:"https://upload.wikimedia.org/wikipedia/ru/thumb/c/ce/Aang.png/280px-Aang.png",alt:""}),e.message,(0,f.jsxs)("div",{children:[e.likeCount,(0,f.jsx)("span",{children:" like(s)"})]})]},e.id)},_=function(e){var i=(0,j.cI)(),s=i.register,o=i.handleSubmit,n=i.formState.errors;return(0,f.jsxs)("form",{onSubmit:o((function(i){e.addNewPost(i.text)})),children:[(0,f.jsxs)("div",{children:[(0,f.jsx)("textarea",(0,t.Z)((0,t.Z)({},s("text",{required:"message is required"})),{},{placeholder:"post text"})),n.text&&(0,f.jsx)("span",{children:n.text.message})]}),(0,f.jsx)("div",{children:(0,f.jsx)("input",{type:"submit",value:"Post"})})]})},S=function(e){(0,r.Z)(s,e);var i=(0,l.Z)(s);function s(){return(0,o.Z)(this,s),i.apply(this,arguments)}return(0,n.Z)(s,[{key:"render",value:function(){var e=this,i=this.props.posts.map((function(e){return(0,f.jsx)(A,{id:e.id,message:e.message,likeCount:e.likeCount},e.id)}));return(0,f.jsxs)("div",{className:y,children:[(0,f.jsx)("h3",{children:"My posts"}),(0,f.jsx)(_,{addNewPost:function(i){e.props.addPost(i)}}),(0,f.jsx)("div",{className:Z,children:i})]})}}]),s}(a.PureComponent),M=S,F=s(2177),I=(0,F.$j)((function(e){return{posts:e.profilePage.posts}}),(function(e){return{addPost:function(i){e((0,k.Pi)(i))}}}))(M);var C=function(e){return(0,f.jsxs)("div",{children:[(0,f.jsx)(P,{profile:e.profile,status:e.status,updateProfileStatus:e.updateProfileStatus,isOwner:e.isOwner,savePhoto:e.savePhoto,saveProfile:e.saveProfile}),(0,f.jsx)(I,{})]})},N=s(6871),O=s(7781),J=s(2163),q=function(e){(0,r.Z)(s,e);var i=(0,l.Z)(s);function s(){return(0,o.Z)(this,s),i.apply(this,arguments)}return(0,n.Z)(s,[{key:"componentDidMount",value:function(){this.update()}},{key:"componentDidUpdate",value:function(e,i,s){var t,o,n;(null===(t=this.props)||void 0===t||null===(o=t.params)||void 0===o?void 0:o.userId)!==(null===e||void 0===e||null===(n=e.params)||void 0===n?void 0:n.userId)&&this.update()}},{key:"update",value:function(){var e,i,s,t=null!==(e=null===(i=this.props)||void 0===i||null===(s=i.params)||void 0===s?void 0:s.userId)&&void 0!==e?e:this.props.loggedUserId;this.props.getProfile(+t),this.props.getProfileStatus(+t)}},{key:"render",value:function(){var e,i,s,o,n=void 0===(null===(e=this.props)||void 0===e||null===(i=e.params)||void 0===i?void 0:i.userId)&&this.props.loggedUserId>0||(null===(s=this.props)||void 0===s||null===(o=s.params)||void 0===o?void 0:o.userId)===String(this.props.loggedUserId);return(0,f.jsx)(C,(0,t.Z)((0,t.Z)({},this.props),{},{isOwner:n}))}}]),s}(a.Component);function D(e){return function(i){return(0,f.jsx)(e,(0,t.Z)((0,t.Z)({},i),{},{params:(0,N.UO)()}))}}var U=(0,O.qC)((0,F.$j)((function(e){return{profile:e.profilePage.profile,status:e.profilePage.status,isAuth:e.auth.isAuth,loggedUserId:e.auth.userId}}),{getProfile:k.GA,getProfileStatus:k.bs,updateProfileStatus:k.xr,savePhoto:k.Tw,saveProfile:k.Ms}),D,J.Z)(q)},2163:function(e,i,s){var t=s(1413),o=s(4925),n=(s(2791),s(6871)),r=s(2177),l=s(184),a=["isAuth"],u=function(e){return{isAuth:e.auth.isAuth}};i.Z=function(e){return(0,r.$j)(u)((function(i){var s=i.isAuth,r=(0,o.Z)(i,a);return s?(0,l.jsx)(e,(0,t.Z)({},r)):(0,l.jsx)(n.Fg,{to:"/login"})}))}},9765:function(e,i,s){e.exports=s.p+"static/media/default_avatar.15c3b5f47f483098b4f1.png"}}]);
//# sourceMappingURL=339.71f8dbbf.chunk.js.map